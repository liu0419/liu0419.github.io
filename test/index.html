
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>index</title>
  <!-- 引入 Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="airbnb.css" />

  <style>
    /* 簡單樣式 */
    #cart-icon {
      margin-left: -10px;
      cursor: pointer;
      font-size: 24px;
    }

    #cart-popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 300px;
      background: #f9f9f9;
      border: 1px solid #ccc;
      padding: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      z-index: 1000;
    }

    #cart-popup h3 {
      margin: 0 0 10px;
    }

    #cart-popup ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    #cart-popup ul li {
      margin: 5px 0;
    }

    #overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }
  </style>

</head>

<body>
  <!-- 頂部導覽列 -->
  <nav class="navbar navbar-expand-lg navbar-light">
    <div class="container">
      <!-- 左側Logo -->
      <a class="navbar-brand" href="#">
        <img src="https://tomorrowhubs.com/upload/users/image/airbnb(1).png" alt="Airbnb Logo">
      </a>
      <!-- 漢堡選單按鈕 -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <!-- 搜尋欄和右側按鈕 -->
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav " style="margin-left: auto; padding:0px 20px">
          <li class="nav-item w-60">
            <div class="searchBar d-flex align-items-center  ">
              <input type="text" placeholder="搜尋 " class="form-control tranlatable">
              <button class="btn">
                <i class="bi bi-search"></i>
              </button>
            </div>
          </li>
        </ul>
        <ul class="navbar-nav" style="align-items: center">
          <select id="language-select" style="height: 30px;width: 90px; ">
            <option value="zh">中文</option>
            <option value="en">English</option>
            <option value="es">Español</option>
            <!-- 更多語言選項 -->
          </select>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="bi bi-person-circle icon-menu" style="font-size:2rem"></i>
            </a>
          </li>

        </ul>

      </div>
    </div>
    <div style="transform:scale(1.5)" id="cart-icon" class="d-flex align-items-center mx-auto">🛒</div>
  </nav>
  <!-- 購物車彈跳視窗 -->
  <div id="overlay"></div>
  <div id="cart-popup">
    <h3>購物車內容</h3>
    <ul id="cart-items"></ul>
    <button id="close-popup">關閉</button>
  </div>

  <!-- 類別欄 -->
  <div class="container-fluid border-bottom py-2 image-container">

    <div class="d-flex justify-content-around category-icons image-container">
      <a href="#" class="text-center category-item " data-target="category1">
        <img src="https://a0.muscache.com/pictures/747b326c-cb8f-41cf-a7f9-809ab646e10c.jpg" alt="小木屋">
        <p class="mb-0" id="wood">小木屋</p>
      </a>
      <a href="#" class="text-center category-item" data-target="category2">
        <img src="https://a0.muscache.com/pictures/3b1eb541-46d9-4bef-abc4-c37d77e3c21b.jpg" alt="民宿">
        <p class="mb-0" id="bnb">民宿</p>
      </a>
      <a href="#" class="text-center category-item" data-target="category3">
        <img src="https://cdn-icons-png.flaticon.com/512/190/190590.png" alt="前衛風格">
        <p class="mb-0">前衛風格</p>
      </a>
      <a href="#" class="text-center category-item" data-target="category4">
        <img src="https://cdn-icons-png.flaticon.com/512/3448/3448384.png" alt="驚喜泳池">
        <p class="mb-0">驚喜泳池</p>
      </a>
      <a href="#" class="text-center category-item" data-target="category5">
        <img src="https://cdn-icons-png.flaticon.com/512/2917/2917783.png" alt="牧羊人小屋">
        <p class="mb-0">牧羊人小屋</p>
      </a>
    </div>
  </div>

  <!-- 類別內容 -->
  <div class="container mt-4  ">
    <div id="category1" class="category-content" style="display: block;">
      <h3>小木屋</h3>

      <!-- 卡片區塊 -->
      <div class="container mt-f4">
        <div id="content1" class="row"></div>

      </div>
    </div>

    <div id="category2" style="display: none;">
      <div id="content2" class="row"></div>


    </div>

    <div id="category3" class="category-content">
      <h3>前衛風格</h3>
      <p>這是前衛風格類別的內容...</p>
    </div>
    <div id="category4" class="category-content">
      <h3>驚喜泳池</h3>
      <p>這是驚喜泳池類別的內容...</p>
    </div>
    <div id="category5" class="category-content">
      <h3>牧羊人小屋</h3>
      <p>這是牧羊人小屋類別的內容...</p>
    </div>
  </div>

  <footer class="bg-dark text-white py-4">
    <div class="container text-center">
      <p class="mb-2">© 2025 Your Website. All Rights Reserved.</p>
      <p>
        <a href="#" class="text-white mx-2">隱私政策</a> |
        <a href="#" class="text-white mx-2">服務條款</a> |
        <a href="#" class="text-white mx-2">聯絡我們</a>
      </p>
    </div>
  </footer>

  <!-- 引入 Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- 添加自定義 JavaScript -->
  <script>
    document.querySelectorAll('.category-item').forEach(item => {
      item.addEventListener('click', function (event) {
        // 防止重新載入頁面
        event.preventDefault();

        // 隱藏所有內容
        document.querySelectorAll('.category-content').forEach(content => {
          content.style.display = 'none';
        });

        // 顯示對應內容
        const target = this.getAttribute('data-target');
        document.getElementById(target).style.display = 'block';
        this.getAttribute('data-target');

        // Get tab status
        let type ;
        if (target === "category1") {
          type = 1;
        } else if (target === "category2") {
          type = 2;
        }
        console.log("type=", type)
        getData(type)


      });
    });

    // TODO
    // let type;
    // if (getComputedStyle(document.getElementById('category1')).display === 'block') {
    //   type = 1;
    // } else if (getComputedStyle(document.getElementById('category2')).display === 'block') {
    //   type = 2;
    // }
    // console.log("type=",type)



    function getData(type) {
      //fetch(`/api/data?type=${type}`)
      fetch(`/mm/kk?typee=${type}`)
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.json(); // 解析 JSON 回應
        })
        .then(data => {
          console.log(data)
          // 取得 card 的內容
          const card = data;
          // 可根據需求將 card 資料顯示在頁面上
          for (let i = 0; i < card.length; i++) {
            console.log(card[i].img, card[i].title, card[i].content, card[i].price)

            let id = `content${type}`;
            const content = document.getElementById(id);
            content.innerHTML += `<div class="col-md-3 mb-4">
            <div class="card h-100 hover-img hover-image:hover">
              <div id="carouselExample${i}" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner" style="height: 200px">
                <div class="carousel-item active" style="height: 200px  object-fit:fill">
                    <img src="${card[i].img1}" class="d-block w-100" alt="Image 1">
                </div>
                <div class="carousel-item" style="height: 200px  object-fit:fill">
                    <img src="${card[i].img2}" class="d-block w-100" alt="Image 2">
                </div>
                <div class="carousel-item" style="height: 200px" object-fit:fill>
                    <img src="${card[i].img3}" class="d-block w-100" alt="Image 3">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample${i}" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample${i}" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
              <div class="card-body">
                <h5 class="card-title">${card[i].title}</h5>
                <p class="card-text">${card[i].content}<br>3月2日至7日</p>
                <p class="fw-bold">${card[i].price}</p>
                <p><i class="bi bi-star-fill text-warning"></i>${card[i].rate} </p>
                <div class="product" id="${card[i].product}">
                  <button type="button" class="w-100 btn btn-lg btn-outline-primary buy-btn " data-product="${card[i].product}">Book</button>
                </div> 
              </div>
            </div>
          </div>`

          }

        })
        .catch(error => {
          console.error('Error fetching data:', error);
        });
    }

    const translations = {
      zh: {
        wood: "小木屋",
        bnb: "民宿",
      },
      en: {
        wood: "Cabin",
        bnb: "Bed and Breakfast",
      },
      es: {
        wood: "Cabaña",
        bnb: "Casa Rural",
      }
    };

    document.getElementById('language-select').addEventListener('change', function () {
      const selectedLanguage = this.value;

      document.getElementById('wood').textContent = translations[selectedLanguage].wood;
      document.getElementById('bnb').textContent = translations[selectedLanguage].bnb;
    });



  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>


  <script>
    // 初始值 (如果 localStorage 裡沒有 cart，就設置一個初始值)
    if (!localStorage.getItem("cart")) {
      localStorage.setItem("cart", JSON.stringify({ p1: 0, p2: 0, p3: 0, p4: 0 }));
    }

    // 更新按鈕點擊後的計數邏輯
    function updateCounter(key) {
      // 取得目前的 cart 資料
      let cart = JSON.parse(localStorage.getItem("cart"));

      // 更新對應的 key 的值
      cart[key]++;

      // 將更新後的資料存回 localStorage
      localStorage.setItem("cart", JSON.stringify(cart));

      // 測試輸出 (可刪除)
      console.log(`Updated ${key}:`, cart);
    }

    // 綁定按鈕事件
    /*
    document.getElementById("product1").addEventListener("click", () => updateCounter("p1"));
    document.getElementById("product2").addEventListener("click", () => updateCounter("p2"));
    document.getElementById("product3").addEventListener("click", () => updateCounter("p3"));
    document.getElementById("product4").addEventListener("click", () => updateCounter("p4")); 
    */

  </script>
  <script>
    // 購物車彈跳視窗邏輯
    const cartIcon = document.getElementById("cart-icon");
    const cartPopup = document.getElementById("cart-popup");
    const cartItems = document.getElementById("cart-items");
    const overlay = document.getElementById("overlay");
    const closePopup = document.getElementById("close-popup");

    // 更新購物車內容
    function updateCartPopup() {
      const cart = JSON.parse(localStorage.getItem("cart"));
      cartItems.innerHTML = ""; // 清空現有列表
      for (const [key, value] of Object.entries(cart)) {
        const li = document.createElement("li");
        li.textContent = `${key}: ${value}`;
        cartItems.appendChild(li);
      }
    }

    // 開啟彈跳視窗
    cartIcon.addEventListener("click", () => {
      updateCartPopup();
      cartPopup.style.display = "block";
      overlay.style.display = "block";
    });

    // 關閉彈跳視窗
    closePopup.addEventListener("click", () => {
      cartPopup.style.display = "none";
      overlay.style.display = "none";
    });
    overlay.addEventListener("click", () => {
      cartPopup.style.display = "none";
      overlay.style.display = "none";
    });
  </script>


</body>

</html>
